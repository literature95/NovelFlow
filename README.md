# NovelFlow
AI小说写作助手
# NovelFlow - AI 辅助小说写作平台

## 📖 项目简介

NovelFlow 是一个集 **AI 辅助写作**、**小说管理**、**角色设计**、**世界观构建**于一体的全功能小说创作平台。通过先进的 AI 技术，帮助作家快速生成灵感、完善剧情、管理故事世界。

## ✨ 核心功能

### 📝 写作工具
- **沉浸式编辑器**：支持 Markdown 语法，实时预览效果
- **自动保存**：编辑内容自动保存，防止意外丢失
- **AI 章节生成**：基于章节简介智能生成内容草稿
- **格式快捷工具栏**：提供粗体、斜体、标题、列表等常用格式

### 📚 小说管理
- **章节管理**：创建、编辑、删除、排序章节
- **小说统计**：实时显示章节数、字数、段落数等信息
- **内容导出**：支持将小说导出为多种格式
- **版本控制**：记录创作历史，支持版本回滚

### 🎭 角色设计
- **角色档案**：创建详细的角色信息卡片
- **关系图谱**：可视化展示角色之间的关系网络
- **角色发展**：追踪角色在故事中的成长轨迹
- **AI 角色建议**：基于角色设定生成发展建议

### 🌍 世界观构建
- **世界设定**：记录小说世界的规则、历史、地理等
- **时间线**：可视化展示故事的时间脉络
- **地点管理**：创建和管理故事中的重要地点
- **AI 世界扩展**：基于现有设定智能扩展世界观

### 🔧 管理功能
- **用户认证**：支持注册、登录、权限管理
- **管理员后台**：管理用户、小说、系统配置
- **数据备份**：定期备份用户数据
- **系统监控**：实时监控系统状态

## 🛠️ 技术栈

| 分类 | 主要依赖 |
|---|---|
| 前端框架 | Next.js 16 · App Router |
| UI & 样式 | React · Tailwind CSS 4 |
| 语言 | TypeScript 5 |
| 数据库 | PostgreSQL · SQLite |
| ORM | Prisma 5 |
| 认证 | JWT · NextAuth |
| AI 服务 | LangChain · OpenAI 兼容接口 |
| 代码质量 | ESLint · Prettier |
| 部署 | Docker · Vercel · CloudFlare pages |

## 📁 项目结构

```
NovelFlow/
├── novel-writing-platform/         # 主应用目录
│   ├── src/
│   │   ├── app/                    # Next.js App Router
│   │   │   ├── api/                # API 路由
│   │   │   │   ├── ai/             # AI 相关接口
│   │   │   │   ├── auth/           # 认证相关接口
│   │   │   │   ├── novels/         # 小说管理接口
│   │   │   │   └── admin/          # 管理员接口
│   │   │   ├── dashboard/          # 仪表盘页面
│   │   │   └── auth/               # 认证页面
│   │   ├── components/             # 公共组件
│   │   ├── hooks/                  # 自定义 Hooks
│   │   ├── lib/                    # 工具函数
│   │   └── styles/                 # 样式文件
│   ├── prisma/                     # Prisma 数据库配置
│   └── public/                     # 静态资源
├── assets/                         # 项目资源
└── .cozeproj/                      # 部署配置
```

## 🚀 快速开始

### 环境要求
- Node.js 18.x 或更高版本
- PostgreSQL 14.x 或更高版本
- Git

### 一键安装（推荐）

我们提供了一键安装脚本，简化依赖安装过程：

1. **运行安装脚本**
```powershell
# 在项目根目录执行
.nstall-dependencies.ps1
```

2. **配置环境变量**
```bash
cd novel-writing-platform
cp .env.example .env
# 编辑 .env 文件，配置数据库连接、AI API 密钥等
```

3. **数据库初始化**
```bash
npx prisma migrate dev
npx prisma generate
```

4. **启动开发服务器**
```bash
npm run dev
```

5. **访问应用**
打开浏览器访问 http://localhost:5000

### 🐳 Docker 部署

本项目已包含优化的 Docker 配置，支持使用 Docker Compose 进行容器化部署。配置采用了现代最佳实践，包括多阶段构建、非 root 用户、健康检查、资源限制等功能。

#### 环境要求
- Docker (20.10 或更高版本)
- Docker Compose (2.0 或更高版本)

#### 本地开发部署

如果您只是想在本地环境快速体验完整功能，可以使用以下步骤：

1.  **准备环境变量文件**
    在项目根目录创建 `.env` 文件并配置必要的环境变量：
    ```bash
    cp .env.example .env
    # 编辑 .env 文件，配置数据库连接、AI API 密钥等
    ```

2.  **启动服务**
    在项目根目录执行以下命令启动所有服务：
    ```bash
    docker-compose up --build
    ```
    *   `--build` 标志表示每次启动时重新构建镜像
    *   如果不需要重新构建，可以使用 `docker-compose up -d` 在后台运行

3.  **访问应用**
    服务启动后，打开浏览器访问：`http://localhost:5000`

## 📖 使用指南

### 创建第一个小说
1. 注册并登录账户
2. 点击 "创建小说" 按钮
3. 填写小说基本信息（标题、类型、简介）
4. 进入小说管理页面

### 编写章节
1. 点击 "新建章节" 按钮
2. 填写章节标题和简介
3. 在编辑器中开始写作
4. 使用 AI 助手生成灵感
5. 点击保存或等待自动保存

### 设计角色
1. 进入 "角色管理" 页面
2. 点击 "创建角色"
3. 填写角色基本信息（姓名、性别、年龄、性格等）
4. 使用 AI 助手扩展角色背景

## 🤝 贡献指南

我们欢迎社区贡献！如果您想参与项目开发，请参考以下步骤：

1. Fork 仓库
2. 创建特性分支（`git checkout -b feature/AmazingFeature`）
3. 提交更改（`git commit -m 'Add some AmazingFeature'`）
4. 推送到分支（`git push origin feature/AmazingFeature`）
5. 开启 Pull Request

## 📄 许可证

本项目采用 MIT 许可证。

## 📊 项目状态

- ✅ 核心功能开发完成
- ✅ AI 辅助写作功能可用
- ✅ 角色管理系统完成
- ✅ 世界观构建工具完成
- ✅ 管理员后台完成
- 🔄 移动端适配开发中
- 🔄 多语言支持开发中
- 🔄 插件系统开发中

## 🧪 测试报告

### 已测试功能

1. **网站首页**
   - ✅ 响应式设计适配不同屏幕尺寸
   - ✅ 现代化CSS渐变和动画效果
   - ✅ 清晰的功能模块布局

2. **用户注册功能**
   - ✅ 完整的表单验证（邮箱、用户名、密码）
   - ✅ 详细的错误信息和用户建议
   - ✅ 移动端优化支持
   - ✅ 密码加密存储

3. **用户登录功能**
   - ✅ 普通用户和管理员登录支持
   - ✅ 密码验证和错误处理
   - ✅ 登录后跳转到仪表盘
   - ✅ JWT令牌生成和存储

4. **小说管理功能**
   - ✅ 创建新小说（标题、描述、大纲等）
   - ✅ 章节管理（创建、编辑、删除、重排序）
   - ✅ 人物和世界观设置
   - ✅ 小说详情和统计信息

5. **写作编辑器**
   - ✅ 沉浸式编辑体验
   - ✅ 自动保存功能
   - ✅ 写作工具栏和格式选项

6. **AI助手功能**
   - ✅ AI辅助创作集成
   - ✅ 多种AI模型配置
   - ✅ AI生成章节内容

7. **管理员功能**
   - ✅ 管理员登录界面
   - ✅ 用户和小说管理
   - ✅ 统计信息和备份功能

### 环境配置

- ✅ 成功安装项目依赖
- ✅ 创建了必要的 .env 配置文件
- ✅ 启动了开发服务器（端口5000）
- ✅ 配置了数据库连接

NovelFlow 小说创作平台是一个功能完整、设计现代化的应用。核心功能均已实现，包括用户认证、小说管理、写作编辑、AI辅助创作等。代码结构清晰，采用了Next.js、React、Prisma等现代技术栈。虽然在测试过程中遇到了一些环境配置问题，但这些都可以通过正确的配置来解决。

平台的响应式设计确保了在不同设备上的良好体验，AI辅助功能为用户提供了强大的创作支持，整体设计符合现代Web应用的标准和用户体验要求。

---

**NovelFlow - 让创作更流畅** 🚀
